<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button text="" color="light"></ion-back-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button>
        <ion-icon slot="icon-only" ios="ellipsis-vertical" md="ellipsis-vertical" color="light"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title *ngIf="data">{{data.answerer.name}}</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-card style="margin: 0 0 10px 0; box-shadow: none;" *ngIf="data">
    <div style="padding: 12px;">
      <div style="display: flex;">
        <ion-avatar style="border: 1px solid #f1f1f1;">
          <img [src]="data.answerer.avatar_url">
        </ion-avatar>
        <div style="padding-left: 10px; padding-top: 2px; flex: 1;">
          <div style="color: rgba(0, 0, 0, .9)">{{data.answerer.name}}</div>
          <div style="color: #b9c1cb; font-size: 13px; padding-top: 1px;">{{data.answerer.headline}}·1小时前</div>
        </div>
        <div style="padding-top: 9px;" (click)="follow()">
          <button style="width: 78px; height: 30px; line-height: 26px; color: #66c33a; border: 1px solid #66c33a;background: #fff;border-radius: 4px;">
            + 关注
          </button>
        </div>
        <!-- <div style="padding-top: 10px; padding-left: 10px;">
          <ion-icon slot="icon-only" ios="ellipsis-horizontal" md="ellipsis-horizontal"  style="font-size: 24px; color: #b9c1cb;"></ion-icon>
        </div> -->
      </div>
      <div class="content" style="padding-top: 10px;color: #1a1a1c;" [innerHTML]="data.content">
      </div>
    </div>
  </ion-card>

  <div *ngIf="userDatas">
    <app-comment-item
      *ngFor="let item of comments"
      [data]="item"
      [token]="userDatas.token"
    >
    </app-comment-item>
  </div>
</ion-content>

<ion-footer class="ion-no-border footer" [style.height]="isOpenEmojiPicker ? '260px' : '60px'">
  <ion-toolbar>
    <ion-grid>
      <ion-row>
        <ion-col size="10">
          <InputItem [placeholder]="'我有想法'" [content]="emoji" [(ngModel)]="commentContent">
          </InputItem>
        </ion-col>
        <ion-col size="2">
          <button style="background-color: #fff;position: relative; top: 10px;" (click)="comment()">
            <ion-icon name="paper-plane-outline" style="font-size: 24px; color: #999"></ion-icon>
          </button>
        </ion-col>
      </ion-row>
    </ion-grid>
    <app-emojipicker *ngIf="isOpenEmojiPicker" (changed)="onChanged($event)"></app-emojipicker>
  </ion-toolbar>
</ion-footer>


<ng-template #emoji>
  <button style="background-color: #fff;" (click)="switchEmojiPicker()">
    <ion-icon name="happy-outline" style="font-size: 24px; color: #999"></ion-icon>
  </button>
</ng-template>